#!/bin/bash
# w2pdf -- compile a nuweb file
# usage: w2pdf [filename]
# 20181227 at 1028h: Generated by nuweb from a_cltl-magicplace.w
NUWEB=../env/bin/nuweb
LATEXCOMPILER=pdflatex
nufil=$1
trunk=${1%%.*}
texfil=${trunk}.tex
auxfil=${trunk}.aux
oldaux=old.${trunk}.aux
indexfil=${trunk}.idx
oldindexfil=old.${trunk}.idx

NUWEB=/home/phuijgen/nlp/cltl-magicplace/env/bin/nuweb
LOOPCOUNTER=0
while
  ! cmp -s $auxfil $oldaux 
do
  if [ -e $auxfil ]
  then
   cp $auxfil $oldaux
  fi
  if [ -e $indexfil ]
  then
   cp $indexfil $oldindexfil
  fi
  $NUWEB $nufil
  $LATEXCOMPILER $texfil
  makeindex $trunk
  bibtex $trunk
  
  if [ $LOOPCOUNTER -ge 10 ]
  then
    cp $auxfil $oldaux
  fi;
done

rm $oldaux



